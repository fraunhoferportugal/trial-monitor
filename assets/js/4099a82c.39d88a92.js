"use strict";(self.webpackChunktm_docs=self.webpackChunktm_docs||[]).push([[570],{1099:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>o});var i=t(5893),s=t(1151);const r={id:"overview",title:"Overview"},l=void 0,d={id:"Data Connectors/overview",title:"Overview",description:"Trial Monitor is capable of connecting to multiple databases and presenting information from these databases under a single interface. Currently Trial Monitor has database connectors for SQL, Firebase, and FHIR.",source:"@site/docs/02-Data Connectors/01-overview.md",sourceDirName:"02-Data Connectors",slug:"/Data Connectors/overview",permalink:"/trial-monitor/Data Connectors/overview",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"overview",title:"Overview"},sidebar:"tutorialSidebar",previous:{title:"Deployment",permalink:"/trial-monitor/Getting started/deployment"},next:{title:"FHIR",permalink:"/trial-monitor/Data Connectors/fhir"}},a={},o=[{value:"Database definition",id:"database-definition",level:2},{value:"Filters",id:"filters",level:3},{value:"Available operations",id:"available-operations",level:4},{value:"Includes",id:"includes",level:3},{value:"Timestamps",id:"timestamps",level:3}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Trial Monitor is capable of connecting to multiple databases and presenting information from these databases under a single interface. Currently Trial Monitor has database connectors for ",(0,i.jsx)(n.a,{href:"sql",children:"SQL"}),", ",(0,i.jsx)(n.a,{href:"firebase",children:"Firebase"}),", and ",(0,i.jsx)(n.a,{href:"fhir",children:"FHIR"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Each database connector has the following responsibilities:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fields selection:"})," Selects a subset of attributes from the target tables/documents."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data aggregation:"})," Combines multiple tables/docs under a single data frame."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Filtering:"})," Filters data based on the frontend state."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"database-definition",children:"Database definition"}),"\n",(0,i.jsxs)(n.p,{children:["Databases are defined in the ",(0,i.jsx)(n.code,{children:"site.yaml"})," file inside the directory ",(0,i.jsx)(n.code,{children:"config/blueprints"}),". In this file you must define a property ",(0,i.jsx)(n.code,{children:"databases"})," which contains one or multiple database definitions, for instance:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"databases:\n  - id: dbName\n    type: mysql\n    users:\n      table: User\n      idField: externalID,\n      labelField: name\n      fields: [name, gender, birthDate]\n      filters:\n        - target: isAdmin\n          operator: '=='\n          value: 1\n"})}),"\n",(0,i.jsx)(n.p,{children:"Each database definition has:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"id"}),": a unique string that should be defined in case there are multiple databases"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"type"}),": ",(0,i.jsx)(n.code,{children:"sql"})," | ",(0,i.jsx)(n.code,{children:"firebase"})," | ",(0,i.jsx)(n.code,{children:"fhir"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"subtype"}),": database subtype. Check the corresponding database for the available subtypes."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"config"}),": properties for data access. Check the corresponding database page for more information."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"users"}),": as a table or collection related to the users of the system always exists, it is through this property you are able to define:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"table"}),": the name of the table or document."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"idField"}),": the name of the field that holds the user identifier"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"labelField"}),": (optional) which field will be used on the frontend to identify users'. If not provided, the ",(0,i.jsx)(n.code,{children:"idField"})," will be used."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"fields"}),": an array with the fields you want to display on the participants table. If not defined, all fields will be shown."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"filters"}),": enables developers to filter users according to specific values."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"structure"})," - (optional) definition of the data structure for the database. Check the corresponding database page for more information."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"timestampField"})," - (optional) name of the field used for filtering data by date"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"filters",children:"Filters"}),"\n",(0,i.jsxs)(n.p,{children:["Filters are defined with the property ",(0,i.jsx)(n.code,{children:"filters"})," and consist of an array of filters. Each filter entry contains:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"target"})," - the attribute to be the target for filtering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"operator"})," - as the name implies, the operator to be applied. The available operations are defined ",(0,i.jsx)(n.a,{href:"#available-operations",children:"here"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"value"})," - the value to be compared with"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"filters:\n  - target: isAdmin\n    operator: '=='\n    value: false\n"})}),"\n",(0,i.jsx)(n.h4,{id:"available-operations",children:"Available operations"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Operator"}),(0,i.jsx)(n.th,{children:"SQL"}),(0,i.jsx)(n.th,{children:"Firebase"}),(0,i.jsx)(n.th,{children:"FHIR"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"=="}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"!="}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:">"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:">="}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"<"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"<="}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"+-"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"contains"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"exact"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"in"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"not-in"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u274c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"array-contains"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u274c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"array-contains-any"}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"\u274c"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["For Hapi FHIR APIs check this ",(0,i.jsx)(n.a,{href:"http://hapi.fhir.org/resource?serverId=home_r4&pretty=true&_summary=&resource=Observation",children:"link"})," to see the available targets to be filtered."]})}),"\n",(0,i.jsx)(n.h3,{id:"includes",children:"Includes"}),"\n",(0,i.jsxs)(n.p,{children:["It is possible to join multiple tables/docs under a single data frame. Naturally, this requires some relation to exist between the different tables. In case of SQL databases, it uses the native relations defined in the model; for NoSQL these relations have to be defined manually. Please check ",(0,i.jsx)(n.a,{href:"firebase",children:"Firebase"})," for details."]}),"\n",(0,i.jsxs)(n.p,{children:["To combine multiple tables define the property ",(0,i.jsx)(n.code,{children:"include"})," with a list of one or more linked tables. The ",(0,i.jsx)(n.code,{children:"include"})," can also be nested."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"  - query:\n      database: database_id\n      table: table\n      include:\n        - table: nested_table\n          fields: [field1, field2]\n          include:\n            - table: nested_table_level_2\n      # ...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"timestamps",children:"Timestamps"}),"\n",(0,i.jsxs)(n.p,{children:["The property ",(0,i.jsx)(n.code,{children:"timestampField"})," allows the configuration of how the system will filter data by date. If no timestamp field is defined, or if the database doesn't have time data, all data will be retrieved."]}),"\n",(0,i.jsxs)(n.p,{children:["You can set a global ",(0,i.jsx)(n.code,{children:"timestampField"})," on the main database config, if all tables share the same property name:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"  - id: database_id\n    timestampField: myTimestampField\n    # ...\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or a different value for each table/doc:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"  - id: database_id\n    timestampField: myTimestampField\n    # ...\n    structure:\n      table_name:\n        timestampField: otherName\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Please check the corresponding database page for more information."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>d,a:()=>l});var i=t(7294);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);