"use strict";(self.webpackChunktm_docs=self.webpackChunktm_docs||[]).push([[475],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return d}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,f=m["".concat(l,".").concat(d)]||m[d]||c[d]||i;return a?n.createElement(f,o(o({ref:t},u),{},{components:a})):n.createElement(f,o({ref:t},u))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2269:function(e,t,a){a.r(t),a.d(t,{assets:function(){return l},contentTitle:function(){return o},default:function(){return c},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return p}});var n=a(3117),r=(a(7294),a(3905));const i={id:"firebase",title:"Firebase"},o=void 0,s={unversionedId:"Databases/firebase",id:"Databases/firebase",title:"Firebase",description:"Trial Monitor offers support to both types of Firebase databases: Cloud Firestore and Firebase Realtime Database. Support for Firebase Real Database is limited to a single database and if data is normalized all data will be requested on a single query. For most projects we recommend Cloud Firestore.",source:"@site/docs/02-Databases/firebase.md",sourceDirName:"02-Databases",slug:"/Databases/firebase",permalink:"/trial-monitor/Databases/firebase",draft:!1,tags:[],version:"current",frontMatter:{id:"firebase",title:"Firebase"},sidebar:"tutorialSidebar",previous:{title:"Fhir",permalink:"/trial-monitor/Databases/fhir"},next:{title:"SQL",permalink:"/trial-monitor/Databases/sql"}},l={},p=[{value:"Config",id:"config",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Cloud Firestore",id:"cloud-firestore",level:2},{value:"Subcollection",id:"subcollection",level:3},{value:"Data structure",id:"data-structure",level:2},{value:"Structure",id:"structure",level:3},{value:"Timestamp",id:"timestamp",level:3}],u={toc:p};function c(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Trial Monitor offers support to both types of Firebase databases: ",(0,r.kt)("a",{parentName:"p",href:"https://firebase.google.com/docs/firestore"},"Cloud Firestore")," and ",(0,r.kt)("a",{parentName:"p",href:"https://firebase.google.com/docs/database"},"Firebase Realtime Database"),". Support for Firebase Real Database is limited to a single database and if data is normalized all data will be requested on a single query. For most projects we recommend Cloud Firestore."),(0,r.kt)("h2",{id:"config"},"Config"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"data access")," is done by defining a property ",(0,r.kt)("inlineCode",{parentName:"p"},"config"),". This ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," is provided via the Firebase Console of the corresponding project:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"config:\n  apiKey: 'PROJECT_API_KEY'\n  authDomain: 'project-name.firebaseapp.com'\n  databaseURL: 'https://project-name.firebaseio.com'\n  projectId: 'project-name'\n  storageBucket: 'project-name.appspot.com'\n  messagingSenderId: 'XXXXXXXXXXXXX'\n")),(0,r.kt)("h2",{id:"authentication"},"Authentication"),(0,r.kt)("p",null,"Sign in with email and password is currently supported on Firebase databases. In the configuration of each database include an object named ",(0,r.kt)("inlineCode",{parentName:"p"},"authentication")," with an ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"password")," properties:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"authentication:\n  email: email@example.org\n  password: mypassword\n")),(0,r.kt)("p",null,"If the ",(0,r.kt)("inlineCode",{parentName:"p"},"authentication")," property is not provide, the system it will try to connect to Firebase without authentication."),(0,r.kt)("h2",{id:"cloud-firestore"},"Cloud Firestore"),(0,r.kt)("p",null,"Cloud Firestore follows a NoSQL paradigm, in which data is organized on a flat structure, one level as max depth, avoiding sub-collections. Collections should have references to other collections in similar fashion to a SQL structure."),(0,r.kt)("h3",{id:"subcollection"},"Subcollection"),(0,r.kt)("p",null,"Data in subcollections is not made available when requesting data from a collection. However, it is still possible to query data in subcollections with an independent request that creates a collection group with all subcollections."),(0,r.kt)("p",null,"To request data in subcollections, in the ",(0,r.kt)("inlineCode",{parentName:"p"},"table")," property write hierarchical path of the subcollection:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"table: collection_name/subcollection_name\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Before using subcollections, you must create an ",(0,r.kt)("a",{parentName:"p",href:"https://firebase.google.com/docs/firestore/query-data/queries#collection-group-query"},"index")," that supports your collection group")),(0,r.kt)("h2",{id:"data-structure"},"Data structure"),(0,r.kt)("p",null,"Relatively to the ",(0,r.kt)("strong",{parentName:"p"},"database structure"),", according to the variation used, the configuration is also distinct. For the first case scenario, you must define the database structure as an array of collections. Each collection is identified by a name and has ",(0,r.kt)("inlineCode",{parentName:"p"},"attributes")," in the form of an array of strings."),(0,r.kt)("h3",{id:"structure"},"Structure"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"attributes"),": Array with the name of properties you want to retrieve from the database."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"FK"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"User:\n  attributes: [ name, teste ]\nActivities:\n  attributes: [ timestamp, value ]\n  FK: \n    name: user\n    reference: User\n")),(0,r.kt)("p",null,"The last case scenario also involves the definition of a property ",(0,r.kt)("inlineCode",{parentName:"p"},"FK")," representing a foreign key which has a sub-property ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),"(the name of the attribute) and ",(0,r.kt)("inlineCode",{parentName:"p"},"reference")," (the name of the table to which it is linked to)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"User:\n  attributes: [ name, test ]\nActivities:\n  attributes: [ timestamp, value, name, test ] # name and test are derived by User\n")),(0,r.kt)("h3",{id:"timestamp"},"Timestamp"),(0,r.kt)("p",null,"The property ",(0,r.kt)("inlineCode",{parentName:"p"},"timestamp")," allows one to configure how the system will filter data by date. By default Trial Monitor will look for a property named ",(0,r.kt)("inlineCode",{parentName:"p"},"timestamp")," in your document; however, if your database has uses a different name you can set that value here. "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"timestamp"),": (string | object) Name of the timestamp key on your database, or an object with the ",(0,r.kt)("inlineCode",{parentName:"li"},"name")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"type")," properties:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"name"),": Name of the timestamp  property on your database. Defaults to ",(0,r.kt)("inlineCode",{parentName:"li"},"timestamp"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"type"),": (optional) Unix timestamp are expected by default as data type. If you are using Firebase native timestamp you need to set the ",(0,r.kt)("inlineCode",{parentName:"li"},"type")," property to ",(0,r.kt)("inlineCode",{parentName:"li"},"FirebaseTimestamp"),".")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"timestamp: myTimestampName\n--- OR ---\ntimestamp:\n  name: myTimestampName\n  type: FirebaseTimestamp\n")))}c.isMDXComponent=!0}}]);